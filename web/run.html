<!DOCTYPE html>
<html>
<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,Array.prototype.find,Number.isFinite,Number.isInteger,console,console.log,document.head,performance.now"></script>

<head>
    <title>CodeWorld</title>
    <link rel="stylesheet" type="text/css" href="css/theme-variables.css">
    <link rel="stylesheet" type="text/css" href="css/runner.css">
</head>

<body style="text-align: center">
    <canvas id="screen"></canvas>
    <img id="cwlogo" style="display: none" src="codeworld.png" width=900 height=200>
</body>
<script type="text/javascript" src="js/run.js"></script>
<script type="text/javascript">
    // params from the URL
    let paramList = location.search.slice(1).split('&');
    let params = {};
    for (let i = 0; i < paramList.length; i++) {
        let name = paramList[i].split('=')[0];
        let value = paramList[i].slice(name.length + 1);
        params[name] = value;
    }
    // params from the hash
    paramList = location.hash.slice(1).split('&');
    for (let i = 0; i < paramList.length; i++) {
        let name = paramList[i].split('=')[0];
        let value = paramList[i].slice(name.length + 1);
        params[name] = value;
    }

    let hash = params['hash'];
    let dhash = params['dhash'];
    let mode = params['mode'];
    // Game id is just dumped in the global JS namespace and read there by gameOf
    let gid = params['gid'];
    if (!mode) mode = 'codeworld';

    let query = '?mode=' + mode;
    if (hash) query += '&hash=' + hash;
    if (dhash) query += '&dhash=' + dhash;

    let uri = 'runJS' + query;

    let loadScript = document.createElement('script');
    loadScript.setAttribute('type', 'text/javascript');
    loadScript.setAttribute('src', uri);
    document.body.appendChild(loadScript);

</script>
<script type="text/javascript" src="js/debugmode.js"></script>

</html>
